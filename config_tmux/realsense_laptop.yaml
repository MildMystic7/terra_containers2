session_name: docker_session
environment:
 CONTAINER_NAME: "docker-realsense_ros2"
# shell_command_before:
#   - docker compose -f docker/docker-compose.yaml up --build -d
windows:
  - window_name: Docker Shell
    layout: tiled
    shell_command_before:
      - xhost +local:docker
      - docker run --rm -it --privileged --network host -v /dev:/dev -v ~/data:/data --env "DISPLAY" --env="QT_X11_NO_MITSHM=1" -v "/tmp/.X11-unix:/tmp/.X11-unix:rw"  $CONTAINER_NAME bash
      - . install/local_setup.bash
    panes:
      - shell_command:
          # Realsense node
          - ros2 launch realsense2_camera rs_launch.py enable_gyro:=true enable_accel:=true enable_infra1:=true enable_infra2:=true
      - shell_command:
          # Health
          - ros2 topic list
      - shell_command:
          # Bag record
          - cd /DATA
          - rviz2
          # - ros2 bag record /camera/camera/infra1/image_rect_raw /camera/camera/infra2/image_rect_raw /camera/camera/color/image_raw /camera/camera/gyro/sample /camera/camera/accel/sample
